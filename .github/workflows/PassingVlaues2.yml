name: Pass Output Between Jobs

on:
  workflow_dispatch:

jobs:
  job1:
    name: Generate Output
    runs-on: ubuntu-latest

    # ðŸ‘‡ Declare outputs at job level
    outputs:
      app_port: ${{ steps.set_output.outputs.port }}
      message: ${{ steps.set_output.outputs.msg }}

    steps:
      - name: Generate values
        id: set_output    # ðŸ‘ˆ step ID is required
        run: |
          echo "port=3001" >> $GITHUB_OUTPUT
          echo "msg=Hello from Job 1" >> $GITHUB_OUTPUT

  job2:
    name: Consume Output
    runs-on: ubuntu-latest

    # ðŸ‘‡ Job dependency
    needs: job1

    steps:
      - name: Use output from Job 1
        run: |
          echo "Port from Job 1: ${{ needs.job1.outputs.app_port }}"
          echo "Message from Job 1: ${{ needs.job1.outputs.message }}"
